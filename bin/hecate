#!/bin/sh

PROGNAME="$(basename $0)"
VERSION="latest"

error(){
  error_code=$1
  echo "ERROR: $2" >&2
  echo "($PROGNAME wrapper version: $VERSION, error code: $error_code )" &>2
  exit $1
}

check_cmd_in_path(){
  cmd=$1
  which $cmd > /dev/null 2>&1 || error 1 "$cmd not found!"
}

check_cmd_in_path docker
check_cmd_in_path docker-machine
docker-machine active > /dev/null 2>&1 || error 2 "No active docker-machine VM found."

exec docker run \
    --interactive \
    --tty \
    --rm \
    "ncfritz/ssh-hecate:$VERSION" "$@"